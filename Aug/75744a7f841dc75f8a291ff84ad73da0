MyBroadband tested building a do-it-yourself uninterruptible power supply (UPS) for a Wi-Fi router, and it easily survived a 4-hour power outage. Although there are initiatives afoot to end load-shedding in South Africa, experts agree that the country faces at least another year of rotational power cuts. Therefore, South Africans will be looking for ways to remain online during load-shedding. Mobile data can be significantly more expensive than fixed line options, or even services like fixed LTE or 5G. Various companies now make uninterruptable power supplies for routers containing batteries that can keep a router running for a few hours when the power is out. These devices usually cost around R1,500 depending on the brand and capacity and are a good investment if you donâ€™t have other methods of beating load shedding. MyBroadband built and tested a similar UPS for only R784.60 in parts and found it worked excellently to keep our router online. <img class="aligncenter size-full wp-image-454891" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-In_Use.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-In_Use.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-In_Use-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-In_Use-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> The main downside of building such a UPS yourself is the time to design, construct and test it, compared to a working product off the shelf. The available products are also guaranteed to work with most routers, while you must customise the DIY option to the equipment you want to run. The benefits of the DIY solution are a much lower price and flexibility in the design to add more capacity or cover more devices. When designing our UPS, we decided to use off-the-shelf electronic components to minimise design and building time. The main goal was to keep a 4G Wi-Fi router online for 4 hours without external power. The router makes use of a 12V 2A power supply brick, which gives us an indication of the maximum power draw. However, we noticed this router works equally well with a 1A supply, meaning it usually draws less than 12W. Measuring the actual power draw would be helpful during this design step, but everyone does not have access to equipment to do this accurately, so working with the maximum from the power supply is a good guess. This tells us we would need between 48 and 96 Wh of battery capacity if the router always requires the maximum power. Other units with good reviews seem to have battery capacities of around 50-60 Wh, so we started looking for batteries in a similar range. We decided to use lithium-ion batteries for their good power density and ability to deep cycle without losing too much capacity compared to lead acid batteries. These cells are also widely available as they are commonly used in many consumer electronics, including torches and vapes. We shopped around and found 21700-format cells with 5,000 mAh capacities for only R135, which seemed to be a sweet spot for capacity over price. <img class="aligncenter size-full wp-image-454881" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Cell.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Cell.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Cell-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Cell-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> Three of these cells should result in a 55 Wh pack which is ideal for our use case. We placed the batteries in a holder where they can clip in, so we do not have to solder or weld directly to the cells. <img class="aligncenter size-full wp-image-454889" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Holder.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Holder.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Holder-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Holder-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> Initially, we planned on running the three cells in series for a nominal voltage of 12.6 V to reduce the need for stepping voltages up or down. The BMS and charging boards that we found that supported series cells each had a few limitations that made us reconsider our choices, and we ended up putting everything in parallel instead. Tp4056-based charging boards have worked well for our single-cell applications in the past, as they feature decent protective circuitry and all the charging circuitry needed. <img class="aligncenter size-full wp-image-454883" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Charging_Boards.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Charging_Boards.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Charging_Boards-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Charging_Boards-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> These boards also have a reputation for working well in parallel while keeping separate cells isolated from one another, so we used one of them for each of our cells. This also allows us to charge each cell at up to 1A, which should enable the pack to charge back up between load-shedding cycles. As we wanted to use the original 12V power supply to charge these cells, we needed to step the 12V down to an acceptable voltage. We used an adjustable buck converter, which efficiently steps DC voltages down for this purpose. We tested one rated for 3A output, as the three charging boards each draw a bit under 1A at 5V. However, the board got quite hot, so we replaced it with a much larger unit capable of outputting up to 20A. <img class="aligncenter size-full wp-image-454893" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Original_buck.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Original_buck.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Original_buck-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Original_buck-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> The lithium batteries provide between 2.5V and 4.2V depending on their charge and must be stepped back up to 12V to supply the router. We used a simple boost converter to do this, which has the same 2A output capacity as the original power supply. <img class="aligncenter size-full wp-image-454879" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Boost.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Boost.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Boost-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Boost-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> We also bought a 5.5mm connector splitter cable that we cut to have an input and output to the UPS, and a plastic enclosure to house everything. <img class="aligncenter size-full wp-image-454895" src="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Splitter.jpg" alt="" width="800" height="533" srcset="https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Splitter.jpg 800w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Splitter-600x400.jpg 600w, https://mybroadband.co.za/news/wp-content/uploads/2022/08/DIY-UPS-Splitter-768x512.jpg 768w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px" /> We used leftover wire from a previous project to wire everything up. Our components are mostly soldered together, but many of the pieces are also available with screw terminals, making them easy to put together. We thoroughly tested the system for a few cycles, ensuring that the battery protection circuitry works as expected, preventing the batteries from getting damaged. This is a critical step as lithium batteries can be very dangerous if they are overcharged or left to discharge beyond reasonable limits. The batteries consistently charge up to around 4.15 V, which is not perfectly full but does leave a safe margin to prevent overcharging. The batteries discharge to around 3.8V under load after 4 hours of running the router, which shows us that we have a decent margin to keep the router running for longer than our initial target. Charging them back up with the router still connected takes about 4 hours. This means our router should remain on even if the power consistently switches off and back on at 4-hour intervals.